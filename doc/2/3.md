# JavaScript Language

<br>

## ArrayBuffer, бинарные массивы

[ссылка](https://learn.javascript.ru/arraybuffer-binary-arrays)

Базовый объект для работы с бинарными данными имеет тип `ArrayBuffer` и представляет собой ссылку на непрерывную область памяти фиксированной длины.

Создание `ArrayBuffer`:

	let buffer = new ArrayBuffer(16); // создаётся буфер длиной 16 байт
													// 16 x 8 = 128 бит
													// 16 раз по 00000000										
	
Инструкция выше выделяет (**резервирует адреса в памяти для переменной `buffer`**) непрерывную область памяти размером 16 байт и заполняет её нулями.

Как это выглядит в битах:

	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000

У объекта `buffer` есть единственное свойство `byteLength`:

	buffer.byteLength;	// 16
	
Для работы в JS с ArrayBuffer нам нужен специальный JS объект, реализующий «представление» данных, например типизированный массив:

* [Float32Array](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Float32Array)
* [Float64Array](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Float64Array)

> Создав экземпляр **`Float<32|64>Array`**, можно получить доступ к элементам массива, используя методы объекта или стандартный синтаксис доступа к элементу массива по его индексу (с помощью скобочной нотации - квадратные скобки).

Создание `Float32Array` из `ArrayBuffer`:

	let viewFloat32Array = new Float32Array(buffer); // создаётся массив из 4-х элементов со значением 0
	
		viewFloat32Array.length;					 // 4
		viewFloat32Array.BYTES_PER_ELEMENT		 	 // 4
		viewFloat32Array.byteLength;				 // 16 - длина в байтах осталась той же

		
Как это выглядит в битах:

	1-й элемент: 00000000 00000000 00000000 00000000
	2-й элемент: 00000000 00000000 00000000 00000000
	3-й ..
	4-й ..
	
Создание `Float64Array` из `ArrayBuffer`:

	let viewFloat64Array = new Float64Array(buffer); // создаётся массив из 2-х элементов со значением 0
	
		viewFloat32Array.length;					 // 2	
		viewFloat64Array.BYTES_PER_ELEMENT		 	 // 8
		viewFloat64Array.byteLength;				 // 16 - длина в байтах осталась той же


Как это выглядит в битах:

	1-й элемент: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	2-й элемент: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
	
<br>

## Преобразование целого десятичного числа в 32-х разрядное двоичное число

	(function(){
	
	    let input  = "2551";
	    let output = "";
	
	    let r = 32;
	
	    let inputInt10 = parseInt(input, 10).toString(10);
	    let inputInt2  = parseInt(input, 10).toString(2);
	
	    let rDelta = r - inputInt2.length;
	
	    let inputInt2Prefix = "";
	
	    for(let i = 1; i<=rDelta; i++)
	    {
	        inputInt2Prefix += "0";
	    }
	
	    let inputInt2r = inputInt2Prefix + inputInt2;
	    let inputInt2rIndexQ = 0;
	
	
	    for(let i = 0; i<inputInt2r.length; i++)
	    {
	        if(inputInt2rIndexQ === 8)
	        {
	            inputInt2rIndexQ = 0;
	            output += " "
	        }
	
	            output += inputInt2r[i];
	
	        inputInt2rIndexQ++;
	    }
	  
	    return output;
	})();
	
<br>
	
## Преобразование 32-х разрядного двоичного числа в целое десятичное число

	let inputInt2 = "00000000 00000000 00001001 11110111".replace(/\s/g, "");
		parseInt(inputInt2, 2);

<br>

## Преобразование для десятичного числа c плавающей точкой

ссылки:

* [binaryconvert](http://www.binaryconvert.com/result_float.html?decimal=049046050)
* [softelectro](http://www.softelectro.ru/ieee754.html)
* [geeksforgeeks](https://www.geeksforgeeks.org/program-for-conversion-of-32-bits-single-precision-ieee-754-floating-point-representation/)