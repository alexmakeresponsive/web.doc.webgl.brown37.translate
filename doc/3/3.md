# Direction / Orientation

Местоположение сообщает нам, где что-то находится по отношению к согласованной системе отсчета (т. Е. Глобальному началу и набору осей системы координат). Ориентация объектов не менее важна. Объект обращен на север, юг, вниз или вверх? Направление может быть относительным или абсолютным.

* Относительные направления связаны с текущим местоположением и ориентацией объекта. Например, если человек смотрит на север, запад находится слева, а восток - справа. Направления, такие как влево / вправо, вперед / назад и вверх / вниз, относятся к текущей ориентации объекта.
* Абсолютные направления относятся к фиксированной системе отсчета и всегда указывают в одном направлении, независимо от их местоположения. Такие направления, как север / юг и восток / запад, являются примерами абсолютного направления. (В этом обсуждении мы проигнорируем проблемные положения северного и южного полюсов!)

Есть много способов представления направления, включая различные комбинации расстояний и углов, и мы могли бы провести обсуждение, аналогичное предыдущему уроку о местоположении, чтобы разработать некоторые из различных способов. Но давайте просто перейдем к стандартному представлению направлений - векторам. Векторы используют обозначение, аналогичное декартовым координатам - расстояниям вдоль линий отсчета. На самом деле векторы и местоположения часто путают, поэтому нам нужно потратить некоторое время, чтобы различать их.

## Vectors

Вектор можно визуально представить в виде линии со стрелкой на одном конце. Векторы представляют направление, поэтому стрелка важна. Стрелка указывает в направлении, которое представляет вектор. Конец без стрелки называется «хвостом»; конец со стрелкой называется «головой». Вектор определяется изменением вдоль каждой линии отсчета, чтобы получить от хвоста к голове. Следовательно, вектор определяется двумя числами: «насколько изменяется x» и «насколько изменяется y». Эти значения часто называют «дельта x» (или dx) и «дельта y» (или dy), как показано в примере справа. Если вы используете две точки для определения вектора, значения «дельта x» и «дельта y» вычисляются путем вычитания координат хвоста из координат головы, то есть (голова - хвост).

Поскольку стандартное представление вектора - это два расстояния, а декартовы координаты для позиции в 2-мерном пространстве - это два расстояния, положение и направление иногда путают. Чтобы разделить эти идеи, в оставшейся части этих руководств векторы будут представлены путем помещения расстояний внутри угловых скобок, таких как <2,5>, или в целом как <dx, dy> для 2-мерного пространства. Для трехмерного пространства вектор будет представлен с использованием трех смещений: <dx, dy, dz>. Если мы используем имена переменных для представления точек или векторов, мы будем использовать отдельные буквы, такие как a, b или c, для обозначения точек, в то время как мы будем использовать жирные буквы, такие как a, b или c, для представления векторов. На картинке справа показаны некоторые примерные точки и векторы.

Вектор, определенный представлением <dx, dy>, не имеет позиции! Такой вектор представляет собой абсолютное направление, основанное на согласованной системе отсчета. Скажем еще раз. Вектор, определенный представлением <dx, dy>, имеет направление, но не имеет позиции. Два вектора с одинаковыми значениями <dx, dy> идентичны, независимо от того, как вы можете их нарисовать визуально. На картинке справа все 3 синих вектора идентичны. Зеленый вектор представляет то же направление, что и синие векторы, но имеет другую длину. Вектор на самом деле представляет две вещи: направление и расстояние (или длину). Его направление указано стрелкой на его головке. Его расстояние - это его длина от хвоста до головы. Если вектор имеет длину ровно 1 единицу, он называется единичным вектором. Если набор векторов имеет одинаковые значения <dx, dy> после преобразования в единичные векторы, все они имеют одинаковое направление. Обычно мы преобразуем векторы в единичные векторы, потому что это упрощает математические вычисления, которые ими управляют, и потому, что это делает представление конкретного направления уникальным. Когда вы конвертируете вектор в единичную длину, вы «нормализуете» вектор, поскольку все векторы, указывающие в одном направлении, имеют одинаковый единичный вектор. Итак, нормализованный вектор - это уникальное представление определенного абсолютного направления.

Если вы хотите представить относительные направления с помощью вектора, вам понадобится вектор и определенное местоположение хвоста. Пара значений (точка, вектор) представляет относительное направление. Например, точка (2,3) и вектор <3,1> представляют относительное направление от определенного места (2,3).

## Vectors vs. Points

Векторы против точек Обратите внимание, что если точка в пространстве используется для представления направления от начала координат, точка и вектор определяются с использованием одинаковых значений расстояния. (Изучите точку (2,3) и вектор <2,3> на диаграмме справа.) Однако это не означает, что точка и вектор идентичны. Точка - это единственное уникальное место в пространстве, а вектор - это направление. Основное различие между точками и векторами заключается в том, что точка имеет местоположение, а вектор - нет. Если вы переместите точку, ее местоположение изменилось. Если вы перемещаете вектор, вы никак не изменили его! Точки и векторы представляют разные вещи и по-разному реагируют на манипуляции.

## WebGL Vectors

Векторы широко используются для представления моделей и для описания движения объектов в анимации. Они представлены тремя значениями компонентов, <dx, dy, dz>, с использованием чисел с плавающей запятой. Это означает, что для одного вектора требуется 12 байт памяти. Векторы могут быть представлены с использованием других типов данных, как описано в предыдущем разделе, что может сэкономить память, но это делается редко.

## Manipulating Vectors

Вектором можно управлять, чтобы изменить его направление и длину. Физический смысл имеют следующие манипуляции:

* Повернуть - чтобы изменить направление вектора.
* Масштаб - для изменения длины вектора.
* Нормализовать - сохранить направление вектора неизменным, но сделать его длину равной 1 единице.
* Добавьте два вектора. В результате получается вектор, представляющий направление, являющееся суммой оригиналов.
* Вычтите два вектора. В результате получается вектор, представляющий направление, в котором отличается от оригинала.
* Для данной точки добавьте к ней вектор. Результатом является новая точка, которая находится в новом месте.
* Учитывая точку, вычтите из нее вектор. В результате новая точка находится в новом месте.

> Обратите внимание, что умножать или делить два вектора вместе не имеет физического смысла.

## A JavaScript Vector Object

Векторное представление и манипулирование - фундаментальные элементы любой программы WebGL. Эта функция должна быть реализована один раз, а затем использоваться по мере необходимости. Приведенный ниже пример программы WebGL позволяет вам проверить класс JavaScript с именем `Learn_webgl_vector3`. Изучите код и обратите внимание на следующее об этом классе JavaScript:

* Он не хранит вектор. Это набор векторных операций.
* Вектор хранится в виде `Float32Array`, который представляет собой специальный тип данных, введенный в JavaScript специально для программирования WebGL. `Float32Array` - это массив значений с плавающей запятой, которые хранятся в том же двоичном формате, что и числа с плавающей запятой графического процессора. Это делает данные, поступающие из двоичной программы WebGL, совместимыми с аппаратным обеспечением графического процессора.
* Большинство функций-членов не создают новых векторов; они оперируют векторами, которые уже существуют. Это сделано намеренно. Эта функция будет использоваться для рендеринга, который происходит от 30 до 60 раз в секунду. Желательно, чтобы вы не создавали постоянно новые векторы, а затем «выбрасывали их». Это окажет давление на сборщик мусора JavaScript, поскольку он пытается не отставать от утилизации неиспользуемых объектов.
* Функции реализованы для скорости с минимальной проверкой ошибок или без нее.

Каждая программа WebGL, созданная в этих руководствах, использует класс `Learn_webgl_vector3` для создания векторов и управления ими.

> `Learn_webgl_vector3` - это набор функций, которые выполняют стандартные операции с трехкомпонентными векторами - (dx, dy, dz), которые хранятся в виде трехэлементных массивов. Тип данных `Float32Array` был добавлен в JavaScript специально для программирования на GPU. Он хранит 32-битные, плавающие
номера точек в формате, необходимом для GPU. Функции не создают новые объекты, потому что в графике в реальном времени создание новых объектов замедляет работу. Функции определены внутри объекта, чтобы предотвратить загрязнение глобального адресного пространства JavaScript.